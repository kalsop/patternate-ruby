<!DOCTYPE html>
<html>
<head>
  <title>Patternate - Find sewing patterns by style</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "jquery.-1.11.1", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "jquery-ui", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "jquery.cookie", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "jquery.lazyload", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "custom_variables", "data-turbolinks-track" => true %>
  
  <%= csrf_meta_tags %>
  <link href="http://fonts.googleapis.com/css?family=Arvo" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet" type="text/css">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-50412074-1', 'patternate.herokuapp.com');
    ga('send', 'pageview');
  
    $(function() {
      $("img.lazy").lazyload();
    });
  </script>
 
  <script>
  $(function() {
    var availableTags = <%= raw @styles %>;
    function split( val ) {
      return val.split( /,\s*/ );
    }
    function extractLast( term ) {
      return split( term ).pop();
    }
 
    $( "#tags" )
      // don't navigate away from the field on tab when selecting an item
      .bind( "keydown", function( event ) {
        if ( event.keyCode === $.ui.keyCode.TAB &&
            $( this ).autocomplete( "instance" ).menu.active ) {
          event.preventDefault();
        }
      })
      .autocomplete({
        minLength: 2,
        source: function( request, response ) {
          // delegate back to autocomplete, but extract the last term
          response( $.ui.autocomplete.filter(
            availableTags, extractLast( request.term ) ) );
        },
        focus: function() {
          // prevent value inserted on focus
          return false;
        },
        select: function( event, ui ) {
          var terms = split( this.value );
          // remove the current input
          terms.pop();
          // add the selected item
          terms.push( ui.item.value );
          // add placeholder to get the comma-and-space at the end
          terms.push( "" );
          this.value = terms.join( ", " );
          return false;
        }
      });
  });
  </script>
    
    


 
  
  


</head>
<body>
  <header>
			  <h1>Patternate</h1>



			  
			  <section>
			    <p>Find sewing patterns by style</p>
          <form method="POST" class="search">
          <div class="ui-widget">
   <label for="tags">Search</label>
            <input type="text" name="search" placeholder="Start typing to find styles" id="tags" class="ui-autocomplete-input" autocomplete="off">
         
            <input type="submit" value="Find" onClick="ga('send', 'event', 'Search', 'Click');">
            </div>
          </form>     
			  </section>
		</header>		
		<section role="main">
      <div class="currentView">
        <%= result_summary %>
        </div><!--searchCriteria-->
        <%= yield %>  
    </section>
  <footer>
    <a href="https://docs.google.com/forms/d/1M0_sUPYe8E3HMZz0uOXcWjasQmB45VvJVCk2bGPzYB0/viewform" class="feedback">Give feedback</a>
    <a href="#top" class="top">Back to top</a>
  </footer>
</body>
</html>
